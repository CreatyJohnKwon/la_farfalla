FROM node:18

# π’΅ Node λ©”λ¨λ¦¬ ν•λ„ ν™•μ¥ (build μ „μ— μ„ μ–Έν•΄μ•Ό ν¨κ³Ό μμ)
ENV NODE_OPTIONS="--max-old-space-size=4096"

WORKDIR /app

COPY package*.json ./
RUN npm ci --legacy-peer-deps

COPY . .

# β… λ©”λ¨λ¦¬ μ ν• ν™•μ¥ ν›„μ— build μν–‰
RUN npm run build

# λΉλ“λ κ²°κ³Όλ¬Όλ§ λ”°λ΅ λ³µμ‚¬ν•  μ μκ² μ¤€λΉ„
CMD ["tar", "czf", "o]()
